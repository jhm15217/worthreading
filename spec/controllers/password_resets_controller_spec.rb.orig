require 'spec_helper'

describe PasswordResetsController do
  let(:user) { FactoryGirl.create(:user) }

  describe "GET 'new'" do
    it "returns http success" do
      get 'new'
      response.should be_success
    end
  end

<<<<<<< Updated upstream
  describe "GET 'create'" do
    it "returns http success" do
      get 'create'
      response.should be_success
    end
  end

  describe "GET 'edit'" do
    it "returns http success" do
      get 'edit'
      response.should be_success
    end
  end

  describe "GET 'update'" do
    it "returns http success" do
      get 'update'
      response.should be_success
    end
  end

=======
  describe "request for a password reset" do
    context "with a registered email" do
      it "should send a reset password email" do 
        expect { post :create, { email: user.email } }.
          to change(ActionMailer::Base.deliveries, :size).by(1)
      end
    end

    context "with an unregistered email" do
      before { user.confirmed = false and user.save(validate: false) }
      it "should not send an email" do
        expect { post :create, { email: user.email } }.
          to change(ActionMailer::Base.deliveries, :size).by(0)
      end
    end
  end

  describe "GET 'edit'" do
  end
>>>>>>> Stashed changes
end
